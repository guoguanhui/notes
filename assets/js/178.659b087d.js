(window.webpackJsonp=window.webpackJsonp||[]).push([[178],{732:function(t,r,e){"use strict";e.r(r);var a=e(14),s=Object(a.a)({},(function(){var t=this,r=t.$createElement,e=t._self._c||r;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h2",{attrs:{id:"https"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#https"}},[t._v("#")]),t._v(" Https")]),t._v(" "),e("p",[t._v("先看一下维基百科对 HTTPS 的定义")]),t._v(" "),e("div",{staticClass:"language-ad-refer extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("Hypertext Transfer Protocol Secure (HTTPS) is an extension of the Hypertext Transfer Protocol (HTTP). It is used for secure communication over a computer network, and is widely used on the Internet. In HTTPS, the communication protocol is encrypted using Transport Layer Security (TLS) or, formerly, its predecessor, Secure Sockets Layer (SSL). The protocol is therefore also often referred to as HTTP over TLS, or HTTP over SSL.\n")])])]),e("p",[t._v("HTTPS (Hypertext Transfer Protocol Secure) 是基于 HTTP 的扩展，用于计算机网络的安全通信，已经在互联网得到广泛应用。在 HTTPS 中，原有的 HTTP 协议会得到 TLS (安全传输层协议) 或其前辈 SSL (安全套接层) 的加密。因此 HTTPS 也常指 HTTP over TLS 或 HTTP over SSL。")]),t._v(" "),e("p",[e("img",{attrs:{src:"https://walegarrett-image-1304556108.cos.ap-chengdu.myqcloud.com/markdown_img/202203271657130.png",alt:"img"}})]),t._v(" "),e("h3",{attrs:{id:"https原理"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#https原理"}},[t._v("#")]),t._v(" Https原理")]),t._v(" "),e("p",[e("img",{attrs:{src:"https://walegarrett-image-1304556108.cos.ap-chengdu.myqcloud.com/markdown_img/202203271657584.png",alt:"img"}})]),t._v(" "),e("p",[t._v("HTTPS 的整个通信过程可以分为两大阶段：证书验证和数据传输阶段，数据传输阶段又可以分为非对称加密和对称加密两个阶段。")]),t._v(" "),e("ol",[e("li",[e("p",[t._v("客户端请求 HTTPS 网址，然后连接到 server 的 "),e("strong",[t._v("443 端口")]),t._v(" (HTTPS 默认端口，类似于 HTTP 的80端口)。")])]),t._v(" "),e("li",[e("p",[t._v("采用 HTTPS 协议的服务器必须要有一套数字 CA (Certification Authority)证书，证书是需要申请的，并由专门的数字证书认证机构(CA)通过非常严格的审核之后颁发的电子证书 (当然了是要钱的，安全级别越高价格越贵)。颁发证书的同时会产生一个私钥和公钥。私钥由服务端自己保存，不可泄漏。公钥则是附带在证书的信息中，可以公开的。证书本身也附带一个证书电子签名，这个签名用来验证证书的完整性和真实性，可以防止证书被篡改。")])]),t._v(" "),e("li",[e("p",[t._v("服务器响应客户端请求，将证书传递给客户端，证书包含公钥和大量其他信息，比如证书颁发机构信息，公司信息和证书有效期等。Chrome 浏览器点击地址栏的锁标志再点击证书就可以看到证书详细信息。")])]),t._v(" "),e("li",[e("p",[t._v("客户端解析证书并对其进行验证。如果证书不是可信机构颁布，或者证书中的域名与实际域名不一致，或者证书已经过期，就会向访问者显示一个警告，由其选择是否还要继续通信。如果证书没有问题，"),e("strong",[t._v("客户端就会从服务器证书中取出服务器的公钥A。然后客户端还会生成一个随机码 KEY，并使用公钥A将其加密。")])])]),t._v(" "),e("li",[e("p",[t._v("客户端把加密后的随机码 KEY 发送给服务器，作为后面对称加密的密钥。")])]),t._v(" "),e("li",[e("p",[t._v("服务器在收到随机码 KEY 之后会使用私钥B将其解密。经过以上这些步骤，客户端和服务器终于建立了安全连接，完美解决了对称加密的密钥泄露问题，接下来就可以用对称加密愉快地进行通信了。")])]),t._v(" "),e("li",[e("p",[t._v("服务器使用密钥 (随机码 KEY)对数据进行对称加密并发送给客户端，客户端使用相同的密钥 (随机码 KEY)解密数据。")])]),t._v(" "),e("li",[e("p",[t._v("双方使用对称加密愉快地传输所有数据。")])])]),t._v(" "),e("h2",{attrs:{id:"ssl-tls"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ssl-tls"}},[t._v("#")]),t._v(" SSL/TLS")]),t._v(" "),e("p",[t._v("SSL 和 TLS 协议可以为通信双方提供识别和认证通道，从而"),e("strong",[t._v("保证通信的机密性和数据完整性")]),t._v("。TLS 协议是从Netscape SSL 3.0协议演变而来的，不过这两种协议并不兼容，SSL 已经逐渐被 TLS 取代，所以下文就以 TLS 指代安全层。 TLS 握手是启动 HTTPS 通信的过程，类似于 TCP 建立连接时的三次握手。 在 TLS 握手的过程中，通信双方交换消息以相互验证，相互确认，并确立它们所要使用的加密算法以及会话密钥 (用于对称加密的密钥)。可以说，TLS 握手是 HTTPS 通信的基础部分。")]),t._v(" "),e("h3",{attrs:{id:"tls握手过程"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#tls握手过程"}},[t._v("#")]),t._v(" TLS握手过程")]),t._v(" "),e("ul",[e("li",[e("p",[t._v("商定双方通信所使用的的 TLS 版本 (例如 TLS1.0, 1.2, 1.3等等)；")])]),t._v(" "),e("li",[e("p",[t._v("确定双方所要使用的密码组合；")])]),t._v(" "),e("li",[e("p",[t._v("客户端通过服务器的公钥和数字证书 (上篇文章已有介绍)上的数字签名验证服务端的身份；")])]),t._v(" "),e("li",[e("p",[t._v("生成会话密钥，该密钥将用于握手结束后的对称加密。")])])]),t._v(" "),e("h3",{attrs:{id:"tls详细握手过程"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#tls详细握手过程"}},[t._v("#")]),t._v(" TLS详细握手过程")]),t._v(" "),e("h2",{attrs:{id:"http与https的比较"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#http与https的比较"}},[t._v("#")]),t._v(" Http与Https的比较")]),t._v(" "),e("ol",[e("li",[e("p",[t._v("最最重要的区别就是安全性，HTTP 明文传输，不对数据进行加密安全性较差。HTTPS (HTTP + SSL / TLS)的数据传输过程是加密的，安全性较好。")])]),t._v(" "),e("li",[e("p",[t._v("使用 HTTPS 协议需要申请 CA 证书，一般免费证书较少，因而需要一定费用。证书颁发机构如：Symantec、Comodo、DigiCert 和 GlobalSign 等。")])]),t._v(" "),e("li",[e("p",[t._v("HTTP 页面响应速度比 HTTPS 快，这个很好理解，由于加了一层安全层，建立连接的过程更复杂，也要交换更多的数据，难免影响速度。")])]),t._v(" "),e("li",[e("p",[t._v("由于 HTTPS 是建构在 SSL / TLS 之上的 HTTP 协议，所以，要比 HTTP 更耗费服务器资源。")])]),t._v(" "),e("li",[e("p",[t._v("HTTPS 和 HTTP 使用的是完全不同的连接方式，用的端口也不一样，前者是 443，后者是 80。")])])]),t._v(" "),e("h2",{attrs:{id:"https协议的优化"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#https协议的优化"}},[t._v("#")]),t._v(" Https协议的优化")]),t._v(" "),e("p",[e("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/348215533",target:"_blank",rel:"noopener noreferrer"}},[t._v("面试官：怎么优化 HTTPS ？ - 知乎"),e("OutboundLink")],1)]),t._v(" "),e("h2",{attrs:{id:"参考"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#参考"}},[t._v("#")]),t._v(" 参考")]),t._v(" "),e("ol",[e("li",[e("p",[e("a",{attrs:{href:"https://segmentfault.com/a/1190000021494676?_ea=29363371",target:"_blank",rel:"noopener noreferrer"}},[t._v("HTTPS 详解一：附带最精美详尽的 HTTPS 原理图"),e("OutboundLink")],1)])]),t._v(" "),e("li",[e("p",[e("a",{attrs:{href:"https://segmentfault.com/a/1190000021559557",target:"_blank",rel:"noopener noreferrer"}},[t._v("HTTPS详解二：SSL / TLS 工作原理和详细握手过程"),e("OutboundLink")],1)])])])])}),[],!1,null,null,null);r.default=s.exports}}]);