(window.webpackJsonp=window.webpackJsonp||[]).push([[73],{628:function(a,t,s){"use strict";s.r(t);var e=s(14),r=Object(e.a)({},(function(){var a=this,t=a.$createElement,s=a._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("nav",[s("a",{attrs:{href:"#一前言"}},[a._v("一、前言")]),s("br"),a._v(" "),s("a",{attrs:{href:"#二CopyTable"}},[a._v("二、CopyTable")]),s("br"),a._v("\n    "),s("a",{attrs:{href:"#21-简介"}},[a._v("2.1 简介")]),s("br"),a._v("\n    "),s("a",{attrs:{href:"#22-命令格式"}},[a._v("2.2 命令格式")]),s("br"),a._v("\n    "),s("a",{attrs:{href:"#23-常用命令"}},[a._v("2.3 常用命令")]),s("br"),a._v("\n    "),s("a",{attrs:{href:"#24-更多参数"}},[a._v("2.4 更多参数")]),s("br"),a._v(" "),s("a",{attrs:{href:"#三ExportImport"}},[a._v("三、Export/Import")]),s("br"),a._v("\n    "),s("a",{attrs:{href:"#31-简介"}},[a._v("3.1 简介")]),s("br"),a._v("\n    "),s("a",{attrs:{href:"#32-命令格式"}},[a._v("3.2 命令格式")]),s("br"),a._v("\n    "),s("a",{attrs:{href:"#33-常用命令"}},[a._v("3.3 常用命令")]),s("br"),a._v(" "),s("a",{attrs:{href:"#四Snapshot"}},[a._v("四、Snapshot")]),s("br"),a._v("\n    "),s("a",{attrs:{href:"#41-简介"}},[a._v("4.1 简介")]),s("br"),a._v("\n    "),s("a",{attrs:{href:"#42-配置"}},[a._v("4.2 配置")]),s("br"),a._v("\n    "),s("a",{attrs:{href:"#43-常用命令"}},[a._v("4.3 常用命令")]),s("br")]),a._v(" "),s("h2",{attrs:{id:"一、前言"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#一、前言"}},[a._v("#")]),a._v(" 一、前言")]),a._v(" "),s("p",[a._v("本文主要介绍 Hbase 常用的三种简单的容灾备份方案，即"),s("strong",[a._v("CopyTable")]),a._v("、"),s("strong",[a._v("Export")]),a._v("/"),s("strong",[a._v("Import")]),a._v("、"),s("strong",[a._v("Snapshot")]),a._v("。分别介绍如下：")]),a._v(" "),s("h2",{attrs:{id:"二、copytable"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#二、copytable"}},[a._v("#")]),a._v(" 二、CopyTable")]),a._v(" "),s("h3",{attrs:{id:"_2-1-简介"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-简介"}},[a._v("#")]),a._v(" 2.1 简介")]),a._v(" "),s("p",[s("strong",[a._v("CopyTable")]),a._v("可以将现有表的数据复制到新表中，具有以下特点：")]),a._v(" "),s("ul",[s("li",[a._v("支持时间区间 、row 区间 、改变表名称 、改变列族名称 、以及是否 Copy 已被删除的数据等功能；")]),a._v(" "),s("li",[a._v("执行命令前，需先创建与原表结构相同的新表；")]),a._v(" "),s("li",[s("code",[a._v("CopyTable")]),a._v(" 的操作是基于 HBase Client API 进行的，即采用 "),s("code",[a._v("scan")]),a._v(" 进行查询, 采用 "),s("code",[a._v("put")]),a._v(" 进行写入。")])]),a._v(" "),s("h3",{attrs:{id:"_2-2-命令格式"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-命令格式"}},[a._v("#")]),a._v(" 2.2 命令格式")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[a._v("Usage: CopyTable "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("general options"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("--starttime"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("X"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("--endtime"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("Y"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("--new.name"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("NEW"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("--peer.adr"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("ADR"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("tablename"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n")])])]),s("h3",{attrs:{id:"_2-3-常用命令"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-常用命令"}},[a._v("#")]),a._v(" 2.3 常用命令")]),a._v(" "),s("ol",[s("li",[a._v("同集群下 CopyTable")])]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[a._v("hbase org.apache.hadoop.hbase.mapreduce.CopyTable --new.name"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("tableCopy  tableOrig\n")])])]),s("ol",{attrs:{start:"2"}},[s("li",[a._v("不同集群下 CopyTable")])]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 两表名称相同的情况")]),a._v("\nhbase org.apache.hadoop.hbase.mapreduce.CopyTable "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n--peer.adr"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("dstClusterZK:2181:/hbase tableOrig\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 也可以指新的表名")]),a._v("\nhbase org.apache.hadoop.hbase.mapreduce.CopyTable "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n--peer.adr"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("dstClusterZK:2181:/hbase "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n--new.name"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("tableCopy tableOrig\n")])])]),s("ol",{attrs:{start:"3"}},[s("li",[a._v("下面是一个官方给的比较完整的例子，指定开始和结束时间，集群地址，以及只复制指定的列族：")])]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[a._v("hbase org.apache.hadoop.hbase.mapreduce.CopyTable "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n--starttime"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("1265875194289")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n--endtime"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("1265878794289")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n--peer.adr"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("server1,server2,server3:2181:/hbase "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n--families"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("myOldCf:myNewCf,cf2,cf3 TestTable\n")])])]),s("h3",{attrs:{id:"_2-4-更多参数"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-4-更多参数"}},[a._v("#")]),a._v(" 2.4 更多参数")]),a._v(" "),s("p",[a._v("可以通过 "),s("code",[a._v("--help")]),a._v(" 查看更多支持的参数")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# hbase org.apache.hadoop.hbase.mapreduce.CopyTable --help")]),a._v("\n")])])]),s("p",[s("img",{attrs:{src:"https://walegarrett-image-1304556108.cos.ap-chengdu.myqcloud.com/markdown_img/202203311634996.png",alt:""}})]),a._v(" "),s("h2",{attrs:{id:"三、export-import"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#三、export-import"}},[a._v("#")]),a._v(" 三、Export/Import")]),a._v(" "),s("h3",{attrs:{id:"_3-1-简介"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-简介"}},[a._v("#")]),a._v(" 3.1 简介")]),a._v(" "),s("ul",[s("li",[s("code",[a._v("Export")]),a._v(" 支持导出数据到 HDFS, "),s("code",[a._v("Import")]),a._v(" 支持从 HDFS 导入数据。"),s("code",[a._v("Export")]),a._v(" 还支持指定导出数据的开始时间和结束时间，因此可以用于增量备份。")]),a._v(" "),s("li",[s("code",[a._v("Export")]),a._v(" 导出与 "),s("code",[a._v("CopyTable")]),a._v(" 一样，依赖 HBase 的 "),s("code",[a._v("scan")]),a._v(" 操作")])]),a._v(" "),s("h3",{attrs:{id:"_3-2-命令格式"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-命令格式"}},[a._v("#")]),a._v(" 3.2 命令格式")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# Export")]),a._v("\nhbase org.apache.hadoop.hbase.mapreduce.Export "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("tablename"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("outputdir"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("versions"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("starttime"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("endtime"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# Inport")]),a._v("\nhbase org.apache.hadoop.hbase.mapreduce.Import "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("tablename"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("inputdir"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n")])])]),s("ul",[s("li",[a._v("导出的 "),s("code",[a._v("outputdir")]),a._v(" 目录可以不用预先创建，程序会自动创建。导出完成后，导出文件的所有权将由执行导出命令的用户所拥有。")]),a._v(" "),s("li",[a._v("默认情况下，仅导出给定 "),s("code",[a._v("Cell")]),a._v(" 的最新版本，而不管历史版本。要导出多个版本，需要将 "),s("code",[a._v("<versions>")]),a._v(" 参数替换为所需的版本数。")])]),a._v(" "),s("h3",{attrs:{id:"_3-3-常用命令"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-常用命令"}},[a._v("#")]),a._v(" 3.3 常用命令")]),a._v(" "),s("ol",[s("li",[a._v("导出命令")])]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[a._v("hbase org.apache.hadoop.hbase.mapreduce.Export tableName  hdfs 路径/tableName.db\n")])])]),s("ol",{attrs:{start:"2"}},[s("li",[a._v("导入命令")])]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("hbase org.apache.hadoop.hbase.mapreduce.Import tableName  hdfs 路径/tableName.db\n")])])]),s("h2",{attrs:{id:"四、snapshot"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#四、snapshot"}},[a._v("#")]),a._v(" 四、Snapshot")]),a._v(" "),s("h3",{attrs:{id:"_4-1-简介"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-简介"}},[a._v("#")]),a._v(" 4.1 简介")]),a._v(" "),s("p",[a._v("HBase 的快照 (Snapshot) 功能允许您获取表的副本 (包括内容和元数据)，并且性能开销很小。因为快照存储的仅仅是表的元数据和 HFiles 的信息。快照的 "),s("code",[a._v("clone")]),a._v(" 操作会从该快照创建新表，快照的 "),s("code",[a._v("restore")]),a._v(" 操作会将表的内容还原到快照节点。"),s("strong",[s("code",[a._v("clone")]),a._v(" 和 "),s("code",[a._v("restore")]),a._v(" 操作不需要复制任何数据，因为底层 HFiles(包含 HBase 表数据的文件) 不会被修改，修改的只是表的元数据信息。")])]),a._v(" "),s("h3",{attrs:{id:"_4-2-配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-配置"}},[a._v("#")]),a._v(" 4.2 配置")]),a._v(" "),s("p",[a._v("HBase 快照功能默认没有开启，如果要开启快照，需要在 "),s("code",[a._v("hbase-site.xml")]),a._v(" 文件中添加如下配置项：")]),a._v(" "),s("div",{staticClass:"language-xml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-xml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("property")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("hbase.snapshot.enabled"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("</")]),a._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("value")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("true"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("</")]),a._v("value")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("</")]),a._v("property")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n")])])]),s("h3",{attrs:{id:"_4-3-常用命令"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-3-常用命令"}},[a._v("#")]),a._v(" 4.3 常用命令")]),a._v(" "),s("p",[a._v("快照的所有命令都需要在 Hbase Shell 交互式命令行中执行。")]),a._v(" "),s("h4",{attrs:{id:"_1-take-a-snapshot"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-take-a-snapshot"}},[a._v("#")]),a._v(" 1. Take a Snapshot")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 拍摄快照")]),a._v("\nhbase"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" snapshot "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'表名'")]),a._v(", "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'快照名'")]),a._v("\n")])])]),s("p",[a._v("默认情况下拍摄快照之前会在内存中执行数据刷新。以保证内存中的数据包含在快照中。但是如果你不希望包含内存中的数据，则可以使用 "),s("code",[a._v("SKIP_FLUSH")]),a._v(" 选项禁止刷新。")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 禁止内存刷新")]),a._v("\nhbase"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" snapshot  "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'表名'")]),a._v(", "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'快照名'")]),a._v(", "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("SKIP_FLUSH "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" true"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])])]),s("h4",{attrs:{id:"_2-listing-snapshots"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-listing-snapshots"}},[a._v("#")]),a._v(" 2. Listing Snapshots")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 获取快照列表")]),a._v("\nhbase"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" list_snapshots\n")])])]),s("h4",{attrs:{id:"_3-deleting-snapshots"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-deleting-snapshots"}},[a._v("#")]),a._v(" 3. Deleting Snapshots")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 删除快照")]),a._v("\nhbase"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" delete_snapshot "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'快照名'")]),a._v("\n")])])]),s("h4",{attrs:{id:"_4-clone-a-table-from-snapshot"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-clone-a-table-from-snapshot"}},[a._v("#")]),a._v(" 4. Clone a table from snapshot")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 从现有的快照创建一张新表")]),a._v("\nhbase"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("  clone_snapshot "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'快照名'")]),a._v(", "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'新表名'")]),a._v("\n")])])]),s("h4",{attrs:{id:"_5-restore-a-snapshot"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-restore-a-snapshot"}},[a._v("#")]),a._v(" 5. Restore a snapshot")]),a._v(" "),s("p",[a._v("将表恢复到快照节点，恢复操作需要先禁用表")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[a._v("hbase"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" disable "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'表名'")]),a._v("\nhbase"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" restore_snapshot "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'快照名'")]),a._v("\n")])])]),s("p",[a._v("这里需要注意的是：是如果 HBase 配置了基于 Replication 的主从复制，由于 Replication 在日志级别工作，而快照在文件系统级别工作，因此在还原之后，会出现副本与主服务器处于不同的状态的情况。这时候可以先停止同步，所有服务器还原到一致的数据点后再重新建立同步。")]),a._v(" "),s("h2",{attrs:{id:"参考资料"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#参考资料"}},[a._v("#")]),a._v(" 参考资料")]),a._v(" "),s("ol",[s("li",[s("a",{attrs:{href:"https://blog.cloudera.com/blog/2012/06/online-hbase-backups-with-copytable-2/",target:"_blank",rel:"noopener noreferrer"}},[a._v("Online Apache HBase Backups with CopyTable"),s("OutboundLink")],1)]),a._v(" "),s("li",[s("a",{attrs:{href:"http://hbase.apache.org/book.htm",target:"_blank",rel:"noopener noreferrer"}},[a._v("Apache HBase ™ Reference Guide"),s("OutboundLink")],1)])])])}),[],!1,null,null,null);t.default=r.exports}}]);